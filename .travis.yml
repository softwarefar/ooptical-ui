language: node_js
node_js:
- "8"
cache:
  directories:
  - "node_modules"
env:
  global:
    secure: "g2iXPnZoIwssrAT/Ed2C9kqo8kCYy9xfTIHFpBhPPS8AJN/fuHmSJG6qDQsvPuwTo5AuSg2WBcyMWUPH36yTH+dyze7clyicHaff7VxEqI2AOMxWYdtZY3DpYlfCwimSfIPfScVYgWaAW7J6O8AA3LzRhUHg81VJDWbf3iuXeNQurZr+N2Rn6SWfqK/rxOaa+G6TV5v5fVJvKL8Kn2KwYhu+FRNs9OuJNnxaiBEuK/iwQiZZmaYeLAX7HePyqSSJ4kjh8KcvqGdf/a30Cu8/b66DdE6qR5ud2Rl5atbw4qI3W2lX39xAAIzbHwJ8HKiA/a1MNP/UXvva2qdsmq6wW7bggblgfyqGipaSROLExXNoIi/w968f7pT68H9zOXAaciwNd0JYPFAbCxDJTcu+6RRKZCnGjxhxfEvRc45ENFNsfCMjiXIegtuwqu0qk8bD/FWrnWG5XBaju3EdaJGK7urRjZJKLRBW81FWMoSE7nBVrtYYkqO4trT9xlNcEeS2G2KIvwDw0feD5nAbTvCsBh2vqDVRidr7hdAm1RjFKoVZtZXfXJWHDd3A+VE1UqbTDFB/P3wnRL1hedhLCJt/V3SobXIuwOW8wTZ97hqZPGWNfhAa56TdEJobTsoVOf+0Fg4Si3CWiNtlNI54OL/6TmxnJRyz6ahrrLe5kJlAnHk="
branches:
  only:
  - master
before_script:
- npm i -g firebase-tools
- npm install
script:
- git checkout master
- ng build --prod --base-href /en-us/
- ng build --prod --configuration=production-fr-ch --base-href /fr-ch/
- cp src/404.html dist/404.html
deploy:
  provider: firebase
  token:
    secure: $FIREBASE_TOKEN
    skip_cleanup: true
    on:
      branch: master
